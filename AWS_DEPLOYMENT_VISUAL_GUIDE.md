# GitHub Actions AWS Deployment - Visual Implementation Guide

## ğŸ¯ End-to-End Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              YOUR LOCAL MACHINE                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  $ git commit -m "Update features"                                  â”‚  â”‚
â”‚  â”‚  $ git push origin main                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   GITHUB REPOSITORY  â”‚
                    â”‚   main branch        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ (Webhook Trigger)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       GITHUB ACTIONS CI/CD PIPELINE              â”‚
        â”‚                                                  â”‚
        â”‚  Step 1: Checkout Repository                   â”‚
        â”‚  Step 2: Build Backend                         â”‚
        â”‚    â”œâ”€ Install dependencies                     â”‚
        â”‚    â”œâ”€ Run tests                                â”‚
        â”‚    â”œâ”€ Build Docker image                       â”‚
        â”‚    â””â”€ Push to ECR                              â”‚
        â”‚                                                 â”‚
        â”‚  Step 3: Build Frontend (Parallel)            â”‚
        â”‚    â”œâ”€ Install dependencies                     â”‚
        â”‚    â”œâ”€ Run tests                                â”‚
        â”‚    â”œâ”€ Build React app                          â”‚
        â”‚    â”œâ”€ Build Docker image                       â”‚
        â”‚    â””â”€ Push to ECR                              â”‚
        â”‚                                                 â”‚
        â”‚  Step 4: Deploy to AWS ECS                    â”‚
        â”‚    â”œâ”€ Update backend service                   â”‚
        â”‚    â”œâ”€ Update frontend service                  â”‚
        â”‚    â”œâ”€ Wait for services to stabilize           â”‚
        â”‚    â””â”€ Confirm deployment                       â”‚
        â”‚                                                 â”‚
        â”‚  Step 5: Notify                                â”‚
        â”‚    â””â”€ Send Slack notification                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚         â”‚                         â”‚
         â–¼         â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  AWS ECR (Registry)  â”‚    â”‚  AWS ECS Cluster     â”‚    â”‚   Slack     â”‚
    â”‚                      â”‚    â”‚                      â”‚    â”‚ Notificationâ”‚
    â”‚  mivent-backend:SHA  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚             â”‚
    â”‚  mivent-frontend:SHA â”‚    â”‚  â”‚ Backend Tasks    â”‚â”‚    â”‚ âœ… Deploy   â”‚
    â”‚  ...latest           â”‚    â”‚  â”‚ Frontend Tasks   â”‚â”‚    â”‚ Successful  â”‚
    â”‚                      â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Application Load Balancer â”‚
                        â”‚  (Manages traffic)         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   USERS ACCESS THE APP      â”‚
                    â”‚   https://mivent.com        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Workflow States

### Workflow File: `.github/workflows/deploy-aws.yml`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORKFLOW TRIGGERS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Event: push to main/develop branch                              â”‚
â”‚ Event: pull request to main/develop branch                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PR to main    â”‚  â”‚ Push to main     â”‚
â”‚   (Test only)   â”‚  â”‚ (Build+Deploy)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Job: build-backend  â”‚  â±ï¸ ~5 minutes
         â”‚                     â”‚
         â”‚ â”œâ”€ Checkout         â”‚
         â”‚ â”œâ”€ Setup Node.js    â”‚
         â”‚ â”œâ”€ Install deps     â”‚
         â”‚ â”œâ”€ Run tests        â”‚
         â”‚ â”œâ”€ Build Docker     â”‚
         â”‚ â””â”€ Push to ECR      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Job:         â”‚      â”‚ Job:           â”‚
    â”‚ build-       â”‚      â”‚ build-         â”‚
    â”‚ frontend     â”‚      â”‚ deploy         â”‚
    â”‚              â”‚      â”‚                â”‚
    â”‚ â±ï¸ ~5 min    â”‚      â”‚ â±ï¸ ~3 min     â”‚
    â”‚              â”‚      â”‚                â”‚
    â”‚ Runs in      â”‚      â”‚ Depends on     â”‚
    â”‚ parallel     â”‚      â”‚ build jobs     â”‚
    â”‚              â”‚      â”‚ (waits)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                 â”‚          â”‚
         â”‚                            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
         â”‚                            â”‚Backend   â”‚ â”‚Frontendâ”‚
         â”‚                            â”‚update    â”‚ â”‚update  â”‚
         â”‚                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                                 â”‚          â”‚
         â”‚                                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Job: notify    â”‚
                            â”‚                â”‚
                            â”‚ Send Slack     â”‚
                            â”‚ notification   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ GitHub Secrets Configuration

```
GitHub Repository Settings
â”‚
â”œâ”€ Settings
â”‚  â””â”€ Secrets and variables
â”‚     â””â”€ Actions
â”‚        â”‚
â”‚        â”œâ”€ AWS_ACCESS_KEY_ID           âœ“ Set
â”‚        â”œâ”€ AWS_SECRET_ACCESS_KEY       âœ“ Set
â”‚        â”œâ”€ AWS_ACCOUNT_ID              âœ“ Set
â”‚        â”œâ”€ ECS_CLUSTER_NAME            âœ“ Set
â”‚        â”‚
â”‚        â”œâ”€ MONGODB_URI                 âœ“ Set
â”‚        â”œâ”€ JWT_SECRET                  âœ“ Set
â”‚        â”œâ”€ CLOUDINARY_*                âœ“ Set
â”‚        â”œâ”€ EMAIL_*                     âœ“ Set
â”‚        â”‚
â”‚        â”œâ”€ REACT_APP_API_URL           âœ“ Set
â”‚        â”œâ”€ REACT_APP_FIREBASE_*        âœ“ Set (all 6)
â”‚        â”‚
â”‚        â””â”€ SLACK_WEBHOOK               âœ“ Set (optional)
```

---

## ğŸ“¦ Docker Build Process

### Backend Dockerfile Flow

```
Start: backend/Dockerfile.prod
â”‚
â”œâ”€ FROM node:18-alpine (builder)
â”‚  â”œâ”€ WORKDIR /app
â”‚  â”œâ”€ COPY package*.json
â”‚  â”œâ”€ RUN npm ci
â”‚  â”œâ”€ COPY backend/
â”‚  â”‚
â”‚  â””â”€ Final Stage:
â”‚     â”œâ”€ EXPOSE 5000
â”‚     â”œâ”€ HEALTHCHECK
â”‚     â””â”€ CMD ["npm", "run", "prod"]
â”‚
â””â”€ Output: mivent-backend:latest (50-100 MB)
```

### Frontend Dockerfile Flow

```
Start: frontend/Dockerfile.prod
â”‚
â”œâ”€ Stage 1: Builder
â”‚  â”œâ”€ FROM node:18-alpine
â”‚  â”œâ”€ WORKDIR /app
â”‚  â”œâ”€ COPY frontend/package*.json
â”‚  â”œâ”€ RUN npm ci
â”‚  â”œâ”€ COPY frontend/
â”‚  â””â”€ RUN npm run build
â”‚     â””â”€ Outputs: /app/build/
â”‚
â”œâ”€ Stage 2: Production
â”‚  â”œâ”€ FROM node:18-alpine
â”‚  â”œâ”€ RUN npm install -g serve
â”‚  â”œâ”€ COPY --from=builder /app/build ./build
â”‚  â”‚
â”‚  â””â”€ Final:
â”‚     â”œâ”€ EXPOSE 3000
â”‚     â”œâ”€ HEALTHCHECK
â”‚     â””â”€ CMD ["serve", "-s", "build", "-l", "3000"]
â”‚
â””â”€ Output: mivent-frontend:latest (80-150 MB)
```

---

## ğŸš€ AWS ECS Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AWS ACCOUNT                                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           ECS CLUSTER: mivent-cluster                    â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Backend Service        â”‚  â”‚ Frontend Service    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  (mivent-backend)       â”‚  â”‚ (mivent-frontend)   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                         â”‚  â”‚                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Task 1 (port 5000)    â”‚  â”‚ Task 1 (port 3000) â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ CPU: 256           â”‚  â”‚ â”œâ”€ CPU: 128         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ â”œâ”€ Memory: 512MB     â”‚  â”‚ â”œâ”€ Memory: 256MB    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€ Running            â”‚  â”‚ â””â”€ Running          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                         â”‚  â”‚                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Task 2 (port 5000)    â”‚  â”‚ Task 2 (port 3000) â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€ CPU: 256           â”‚  â”‚ â”œâ”€ CPU: 128         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚ â”œâ”€ Memory: 512MB     â”‚  â”‚ â”œâ”€ Memory: 256MB    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€ Running            â”‚  â”‚ â””â”€ Running          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                                                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚                              â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Application Load Balancer (ALB)                â”‚         â”‚
â”‚  â”‚  - Distributes traffic                          â”‚         â”‚
â”‚  â”‚  - Health checks                                â”‚         â”‚
â”‚  â”‚  - Port 80/443 â†’ Backend:5000/Frontend:3000    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  CloudWatch Logs                                      â”‚   â”‚
â”‚  â”‚  - /ecs/mivent-backend (backend logs)               â”‚   â”‚
â”‚  â”‚  - /ecs/mivent-frontend (frontend logs)             â”‚   â”‚
â”‚  â”‚  - Retention: 30 days                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AWS Secrets Manager (Sensitive Data)               â”‚   â”‚
â”‚  â”‚  - MONGODB_URI                                       â”‚   â”‚
â”‚  â”‚  - JWT_SECRET                                        â”‚   â”‚
â”‚  â”‚  - CLOUDINARY_* credentials                          â”‚   â”‚
â”‚  â”‚  - EMAIL credentials                                 â”‚   â”‚
â”‚  â”‚  - FIREBASE credentials                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Deployment Lifecycle

```
Stage 1: Code Pushed
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Time: 0 min
Status: Code in GitHub


Stage 2: Build
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Time: 0-5 min
â”œâ”€ Backend test & build
â”œâ”€ Frontend test & build
â””â”€ Push to ECR


Stage 3: Deploy
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Time: 5-8 min
â”œâ”€ Update backend service
â”œâ”€ Update frontend service
â””â”€ Health checks

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   Application Running! ğŸ‰   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status: Live on Production
```

---

## âš ï¸ Health Check Process

```
ECS Task â†’ Application â†’ Health Endpoint
â”‚         â”‚             â”‚
â”‚         â”‚             â””â”€ GET /health
â”‚         â”‚                Returns 200 OK
â”‚         â”‚
â”‚         â””â”€ Responds if healthy
â”‚
â””â”€ CloudWatch records status
   â”œâ”€ HEALTHY âœ…
   â”œâ”€ UNHEALTHY âŒ (restarts task)
   â””â”€ UNKNOWN â³ (during startup)
```

---

## ğŸ”„ Auto-Scaling Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudWatch Metrics â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPU Utilization: 45%â”‚
â”‚ Memory: 60%         â”‚
â”‚ Requests: 100/min   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼ (Check Scaling Policies)
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Target: 70%  â”‚
     â”‚ Current: 45% â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ (Scale Up or Down?)
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ No Action Yet  â”‚
     â”‚ Keep 2 tasks   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     IF CPU reaches 70%:
     â”œâ”€ Scale up to 4 tasks
     â””â”€ Add more capacity

     IF CPU drops below 30%:
     â”œâ”€ Scale down to 1 task
     â””â”€ Save costs
```

---

## ğŸ“Š Log Flow

```
Application
    â”‚ (Logs to stdout)
    â”‚
    â”œâ”€ ğŸ“ Backend logs
    â”‚   â””â”€ Captured by Docker
    â”‚       â””â”€ Sent to CloudWatch
    â”‚           â””â”€ Group: /ecs/mivent-backend
    â”‚
    â””â”€ ğŸ¨ Frontend logs
        â””â”€ Captured by Docker
            â””â”€ Sent to CloudWatch
                â””â”€ Group: /ecs/mivent-frontend

Access logs:
$ aws logs tail /ecs/mivent-backend --follow
$ aws logs tail /ecs/mivent-frontend --follow
```

---

## ğŸ¯ Workflow Status Indicators

```
GitHub Actions â†’ Status Badge

âœ… All Checks Passed
â”œâ”€ Build Backend: SUCCESS
â”œâ”€ Build Frontend: SUCCESS
â”œâ”€ Deploy Backend: SUCCESS
â”œâ”€ Deploy Frontend: SUCCESS
â””â”€ Notify: SUCCESS

âš ï¸ Deployment Issues
â”œâ”€ Build Backend: FAILED âŒ
â”‚  â””â”€ Check logs for errors
â”œâ”€ ECS Service: UNSTABLE
â”‚  â””â”€ Check CloudWatch logs
â””â”€ Health Check: FAILED
   â””â”€ Application not responding

ğŸ“Š In Progress
â”œâ”€ Building...
â”œâ”€ Deploying...
â””â”€ Waiting for service stabilization...
```

---

## ğŸ” Security Flow

```
GitHub Action
    â”‚
    â”œâ”€ Read GitHub Secrets (encrypted)
    â”‚  â””â”€ AWS_ACCESS_KEY_ID
    â”‚  â””â”€ AWS_SECRET_ACCESS_KEY
    â”‚  â””â”€ Other sensitive data
    â”‚
    â”œâ”€ Use Secrets in Build/Deploy
    â”‚  â””â”€ Secrets not printed to logs
    â”‚  â””â”€ Masked in workflow output
    â”‚
    â”œâ”€ Push to ECR (authenticated)
    â”‚
    â””â”€ Deploy to ECS
       â””â”€ Images pulled from secure ECR
       â””â”€ Secrets from AWS Secrets Manager
```

---

## ğŸ“± Notification Flow

```
Deployment Complete
    â”‚
    â”œâ”€ Success âœ…
    â”‚  â””â”€ Collect metrics
    â”‚  â””â”€ Format message
    â”‚  â””â”€ Send to Slack
    â”‚     â””â”€ ğŸ‰ Deployment Successful!
    â”‚        â”œâ”€ Commit: abc123
    â”‚        â”œâ”€ Branch: main
    â”‚        â”œâ”€ Author: your-name
    â”‚        â””â”€ Timestamp
    â”‚
    â””â”€ Failure âŒ
       â””â”€ Collect error details
       â””â”€ Format error message
       â””â”€ Send to Slack
          â””â”€ âš ï¸ Deployment Failed!
             â”œâ”€ Commit: abc123
             â”œâ”€ Branch: main
             â”œâ”€ Error: Task failed to start
             â””â”€ Action: Check logs
```

---

## âœ¨ Monitoring Dashboard

```
AWS Console Widgets

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ECS Service Health   â”‚ CPU Utilization      â”‚
â”‚ Backend: âœ… Running  â”‚ â–„â–„â–„â–„â–‚â–‚â–‚â–„â–„ 45%       â”‚
â”‚ Frontend: âœ… Running â”‚ Avg: 48% Max: 72%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Memory Usage         â”‚ Request Count        â”‚
â”‚ â–„â–„â–„â–„â–ƒâ–ƒâ–ƒâ–„â–„ 62%       â”‚ â–„â–„â–„â–…â–…â–„â–„â–„â–ƒâ–ƒ 250 req  â”‚
â”‚ Avg: 60% Max: 75%   â”‚ Avg: 240 req/min    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task Count           â”‚ Deployments          â”‚
â”‚ Backend: 2/2 âœ…      â”‚ Last 24h: 3          â”‚
â”‚ Frontend: 2/2 âœ…     â”‚ Success Rate: 100%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This visual guide helps understand the complete deployment pipeline flow!
